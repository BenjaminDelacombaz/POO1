D, [2018-04-19T10:22:04.801893 #8796] DEBUG -- :    (0.0ms)  SET  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483
D, [2018-04-19T10:22:04.801893 #8796] DEBUG -- :    (0.0ms)  TRUNCATE bookable_items
D, [2018-04-19T10:22:04.801893 #8796] DEBUG -- :    (0.0ms)  TRUNCATE bookable_items_groups
D, [2018-04-19T10:22:04.801893 #8796] DEBUG -- :    (0.0ms)  TRUNCATE bookings_items
D, [2018-04-19T10:22:04.801893 #8796] DEBUG -- :    (0.0ms)  TRUNCATE equipment_responsibles
D, [2018-04-19T10:22:04.817493 #8796] DEBUG -- :    (15.6ms)  TRUNCATE events
D, [2018-04-19T10:22:04.817493 #8796] DEBUG -- :    (0.0ms)  TRUNCATE events_users
D, [2018-04-19T10:22:04.817493 #8796] DEBUG -- :    (0.0ms)  TRUNCATE groups
D, [2018-04-19T10:22:04.817493 #8796] DEBUG -- :    (0.0ms)  TRUNCATE groups_users
D, [2018-04-19T10:22:04.817493 #8796] DEBUG -- :    (0.0ms)  TRUNCATE manuals
D, [2018-04-19T10:22:04.817493 #8796] DEBUG -- :    (0.0ms)  TRUNCATE users
D, [2018-04-19T10:22:04.833093 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.848693 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `users` (`firstname`, `lastname`, `email`) VALUES ('Joe', 'Dalton', 'joe@dalton.com')
D, [2018-04-19T10:22:04.848693 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.848693 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.848693 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `users` (`firstname`, `lastname`, `email`) VALUES ('Averell', 'Dalton', 'averell@dalton.com')
D, [2018-04-19T10:22:04.848693 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.848693 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.848693 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `users` (`firstname`, `lastname`, `email`) VALUES ('Lucky', 'Luke', 'luke@theforce.com')
D, [2018-04-19T10:22:04.848693 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.848693 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.848693 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `users` (`firstname`, `lastname`, `email`) VALUES ('Jolly', 'Jumper', 'jolly@jumper.com')
D, [2018-04-19T10:22:04.848693 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `groups` (`name`) VALUES ('The good')
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `groups` (`name`) VALUES ('The bad')
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `groups` (`name`) VALUES ('The ugly')
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `groups` (`name`) VALUES ('Sherif')
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `groups` (`name`) VALUES ('Cowboy')
D, [2018-04-19T10:22:04.864293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.879893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.895493 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `groups_users` (`user_id`, `group_id`) VALUES (3, 1)
D, [2018-04-19T10:22:04.895493 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.895493 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.895493 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `groups_users` (`user_id`, `group_id`) VALUES (4, 3)
D, [2018-04-19T10:22:04.895493 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.895493 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.895493 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `groups_users` (`user_id`, `group_id`) VALUES (1, 2)
D, [2018-04-19T10:22:04.895493 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.895493 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.895493 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `groups_users` (`user_id`, `group_id`) VALUES (2, 2)
D, [2018-04-19T10:22:04.895493 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items` (`type`, `name`) VALUES ('Vehicle', 'Diligence')
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items` (`type`, `name`) VALUES ('Vehicle', 'Hearse')
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `manuals` (`title`, `file_name`, `item_id`, `item_type`) VALUES ('How to drive a dilly', 'howtodrive.pdf', 1, 'BookableItem')
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `manuals` (`title`, `file_name`, `item_id`, `item_type`) VALUES ('RIP', 'rip.pdf', 2, 'BookableItem')
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items` (`type`, `name`) VALUES ('Equipment', 'Tar')
D, [2018-04-19T10:22:04.911093 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (15.6ms)  BEGIN
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items` (`type`, `name`) VALUES ('Equipment', 'Feather')
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `equipment_responsibles` (`equipment_id`, `user_id`) VALUES (3, 3)
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `equipment_responsibles` (`equipment_id`, `user_id`) VALUES (4, 4)
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items` (`type`, `name`) VALUES ('Room', 'Saloon')
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items` (`type`, `name`) VALUES ('Room', 'Church')
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items` (`type`, `name`) VALUES ('Room', 'Desert')
D, [2018-04-19T10:22:04.926693 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items_groups` (`bookable_item_id`, `group_id`) VALUES (1, 1)
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items_groups` (`bookable_item_id`, `group_id`) VALUES (1, 2)
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items_groups` (`bookable_item_id`, `group_id`) VALUES (1, 3)
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items_groups` (`bookable_item_id`, `group_id`) VALUES (2, 2)
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items_groups` (`bookable_item_id`, `group_id`) VALUES (3, 1)
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items_groups` (`bookable_item_id`, `group_id`) VALUES (4, 3)
D, [2018-04-19T10:22:04.942293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items_groups` (`bookable_item_id`, `group_id`) VALUES (5, 1)
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items_groups` (`bookable_item_id`, `group_id`) VALUES (5, 2)
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items_groups` (`bookable_item_id`, `group_id`) VALUES (6, 1)
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookable_items_groups` (`bookable_item_id`, `group_id`) VALUES (6, 3)
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:04.957893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.989093 #8796] DEBUG -- :    (0.0ms)  ROLLBACK
D, [2018-04-19T10:22:04.989093 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` ORDER BY `users`.`id` ASC LIMIT 1
D, [2018-04-19T10:22:04.989093 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:04.989093 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `events` (`title`, `starts_at`, `ends_at`, `created_by_id`, `created_at`) VALUES ('Simple event', '2018-04-19 08:22:04', '2018-04-19 09:22:04', 1, '2018-04-19 08:22:04')
D, [2018-04-19T10:22:05.004693 #8796] DEBUG -- :   User Load (0.0ms)  SELECT `users`.* FROM `users` INNER JOIN `events_users` ON `users`.`id` = `events_users`.`user_id` WHERE `events_users`.`event_id` = 1
I, [2018-04-19T10:22:05.004693 #8796]  INFO -- : Sending mail 'New event 1' to ["Joe Dalton <joe@dalton.com>"]
Title: Simple event
Created by : Joe Dalton
Starts at: 2018-04-19 08:22:04 UTC
Ends at  : 2018-04-19 09:22:04 UTC


D, [2018-04-19T10:22:05.004693 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:05.004693 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`firstname` = 'Lucky' LIMIT 1
D, [2018-04-19T10:22:05.004693 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`firstname` = 'Jolly' LIMIT 1
D, [2018-04-19T10:22:05.004693 #8796] DEBUG -- :   User Load (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`lastname` = 'Dalton'
D, [2018-04-19T10:22:05.020293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.020293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `events` (`title`, `starts_at`, `ends_at`, `created_for_id`, `created_by_id`, `created_at`) VALUES ('Bar Mitzvah', '2018-04-19 08:22:04', '2018-04-19 09:22:04', 4, 3, '2018-04-19 08:22:05')
D, [2018-04-19T10:22:05.020293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `events_users` (`event_id`, `user_id`) VALUES (2, 1)
D, [2018-04-19T10:22:05.020293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `events_users` (`event_id`, `user_id`) VALUES (2, 2)
I, [2018-04-19T10:22:05.020293 #8796]  INFO -- : Sending mail 'New event 2' to ["Joe Dalton <joe@dalton.com>", "Averell Dalton <averell@dalton.com>", "Lucky Luke <luke@theforce.com>", "Jolly Jumper <jolly@jumper.com>"]
Title: Bar Mitzvah
Created by : Lucky Luke
Created for: Jolly Jumper
Starts at: 2018-04-19 08:22:04 UTC
Ends at  : 2018-04-19 09:22:04 UTC


Attendees:
  Joe Dalton
  Averell Dalton
D, [2018-04-19T10:22:05.020293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:05.020293 #8796] DEBUG -- :   User Load (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`lastname` = 'Dalton'
D, [2018-04-19T10:22:05.020293 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`firstname` = 'Lucky' LIMIT 1
D, [2018-04-19T10:22:05.020293 #8796] DEBUG -- :   User Load (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`lastname` = 'Dalton'
D, [2018-04-19T10:22:05.020293 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `events` (`title`, `starts_at`, `ends_at`, `created_by_id`, `created_at`) VALUES ('Hanging', '2018-04-19 08:52:04', '2018-04-19 10:22:04', 3, '2018-04-19 08:22:05')
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `events_users` (`event_id`, `user_id`) VALUES (3, 1)
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `events_users` (`event_id`, `user_id`) VALUES (3, 2)
I, [2018-04-19T10:22:05.035893 #8796]  INFO -- : Sending mail 'New event 3' to ["Joe Dalton <joe@dalton.com>", "Averell Dalton <averell@dalton.com>", "Lucky Luke <luke@theforce.com>"]
Title: Hanging
Created by : Lucky Luke
Starts at: 2018-04-19 08:52:04 UTC
Ends at  : 2018-04-19 10:22:04 UTC


Attendees:
  Joe Dalton
  Averell Dalton
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :   Event Load (0.0ms)  SELECT `events`.* FROM `events` WHERE (starts_at < '2018-04-19 10:22:04.957893' AND ends_at > '2018-04-19 08:22:04.957893')
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :   Event Load (0.0ms)  SELECT  `events`.* FROM `events` ORDER BY `events`.`id` DESC LIMIT 1
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`firstname` = 'Joe' LIMIT 1
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :   SQL (0.0ms)  DELETE FROM `events_users` WHERE `events_users`.`event_id` = 3 AND `events_users`.`user_id` = 1
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :   SQL (0.0ms)  UPDATE `events` SET `starts_at` = '2018-04-19 10:22:04', `ends_at` = '2018-04-19 11:22:04' WHERE `events`.`id` = 3
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :   User Load (0.0ms)  SELECT `users`.* FROM `users` INNER JOIN `events_users` ON `users`.`id` = `events_users`.`user_id` WHERE `events_users`.`event_id` = 3
I, [2018-04-19T10:22:05.035893 #8796]  INFO -- : Sending mail 'Event 3 modifications' to ["Averell Dalton <averell@dalton.com>", "Lucky Luke <luke@theforce.com>", "Joe Dalton <joe@dalton.com>"]
Title: Hanging
Created by : Lucky Luke
Starts at: 2018-04-19 10:22:04 UTC
Ends at  : 2018-04-19 11:22:04 UTC


Removed attendees:
  Joe Dalton
Current attendees:
  Averell Dalton
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :   Event Load (0.0ms)  SELECT  `events`.* FROM `events` ORDER BY `events`.`id` DESC LIMIT 1
D, [2018-04-19T10:22:05.035893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.051493 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1
D, [2018-04-19T10:22:05.051493 #8796] DEBUG -- :   User Load (0.0ms)  SELECT `users`.* FROM `users` INNER JOIN `events_users` ON `users`.`id` = `events_users`.`user_id` WHERE `events_users`.`event_id` = 3
I, [2018-04-19T10:22:05.051493 #8796]  INFO -- : Sending mail 'Removing event 3' to ["Averell Dalton <averell@dalton.com>", "Lucky Luke <luke@theforce.com>"]
Title: Hanging
Created by : Lucky Luke
Starts at: 2018-04-19 10:22:04 UTC
Ends at  : 2018-04-19 11:22:04 UTC


Attendees:
  Averell Dalton
D, [2018-04-19T10:22:05.051493 #8796] DEBUG -- :   SQL (0.0ms)  DELETE FROM `events_users` WHERE `events_users`.`event_id` = 3
D, [2018-04-19T10:22:05.051493 #8796] DEBUG -- :   SQL (0.0ms)  DELETE FROM `events` WHERE `events`.`id` = 3
D, [2018-04-19T10:22:05.051493 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:05.051493 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.051493 #8796] DEBUG -- :    (0.0ms)  ROLLBACK
D, [2018-04-19T10:22:05.051493 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` ORDER BY `users`.`id` ASC LIMIT 1
D, [2018-04-19T10:22:05.051493 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.051493 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` INNER JOIN `groups_users` ON `groups`.`id` = `groups_users`.`group_id` WHERE `groups_users`.`user_id` = 1
D, [2018-04-19T10:22:05.067093 #8796] DEBUG -- :    (15.6ms)  ROLLBACK
D, [2018-04-19T10:22:05.067093 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`firstname` = 'Joe' LIMIT 1
D, [2018-04-19T10:22:05.067093 #8796] DEBUG -- :   Room Load (0.0ms)  SELECT  `bookable_items`.* FROM `bookable_items` WHERE `bookable_items`.`type` IN ('Room') AND `bookable_items`.`name` = 'Saloon' LIMIT 1
D, [2018-04-19T10:22:05.067093 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.067093 #8796] DEBUG -- :   Booking Exists (0.0ms)  SELECT  1 AS one FROM `events` INNER JOIN `bookings_items` ON `events`.`id` = `bookings_items`.`booking_id` WHERE `events`.`type` IN ('Booking') AND `bookings_items`.`bookable_item_id` = 5 AND (starts_at < '2018-04-19 13:22:04' AND ends_at > '2018-04-19 08:22:04') LIMIT 1
D, [2018-04-19T10:22:05.067093 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` INNER JOIN `bookable_items_groups` ON `groups`.`id` = `bookable_items_groups`.`group_id` WHERE `bookable_items_groups`.`bookable_item_id` = 5
D, [2018-04-19T10:22:05.067093 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` INNER JOIN `groups_users` ON `groups`.`id` = `groups_users`.`group_id` WHERE `groups_users`.`user_id` = 1
D, [2018-04-19T10:22:05.067093 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `events` (`type`, `title`, `starts_at`, `ends_at`, `created_by_id`, `created_at`) VALUES ('Booking', 'Mini fiesta', '2018-04-19 08:22:04', '2018-04-19 13:22:04', 1, '2018-04-19 08:22:05')
D, [2018-04-19T10:22:05.067093 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookings_items` (`bookable_item_id`, `booking_id`) VALUES (5, 4)
D, [2018-04-19T10:22:05.067093 #8796] DEBUG -- :   User Load (0.0ms)  SELECT `users`.* FROM `users` INNER JOIN `events_users` ON `users`.`id` = `events_users`.`user_id` WHERE `events_users`.`event_id` = 4
I, [2018-04-19T10:22:05.067093 #8796]  INFO -- : Sending mail 'New booking 4' to ["Joe Dalton <joe@dalton.com>"]
Title: Mini fiesta
Created by : Joe Dalton
Starts at: 2018-04-19 08:22:04 UTC
Ends at  : 2018-04-19 13:22:04 UTC
Items: Saloon

D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :    (15.6ms)  COMMIT
D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`firstname` = 'Lucky' LIMIT 1
D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :   Room Load (0.0ms)  SELECT  `bookable_items`.* FROM `bookable_items` WHERE `bookable_items`.`type` IN ('Room') AND `bookable_items`.`name` = 'Saloon' LIMIT 1
D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :   Booking Exists (0.0ms)  SELECT  1 AS one FROM `events` INNER JOIN `bookings_items` ON `events`.`id` = `bookings_items`.`booking_id` WHERE `events`.`type` IN ('Booking') AND `bookings_items`.`bookable_item_id` = 5 AND (starts_at < '2018-04-19 09:22:04' AND ends_at > '2018-04-19 08:22:04') LIMIT 1
D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` INNER JOIN `bookable_items_groups` ON `groups`.`id` = `bookable_items_groups`.`group_id` WHERE `bookable_items_groups`.`bookable_item_id` = 5
D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` INNER JOIN `groups_users` ON `groups`.`id` = `groups_users`.`group_id` WHERE `groups_users`.`user_id` = 3
D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :    (0.0ms)  ROLLBACK
D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`firstname` = 'Lucky' LIMIT 1
D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :   Equipment Load (0.0ms)  SELECT `bookable_items`.* FROM `bookable_items` WHERE `bookable_items`.`type` IN ('Equipment')
D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.082693 #8796] DEBUG -- :   Booking Exists (0.0ms)  SELECT  1 AS one FROM `events` INNER JOIN `bookings_items` ON `events`.`id` = `bookings_items`.`booking_id` WHERE `events`.`type` IN ('Booking') AND `bookings_items`.`bookable_item_id` = 3 AND (starts_at < '2018-04-19 11:22:04' AND ends_at > '2018-04-19 10:22:04') LIMIT 1
D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :   Booking Exists (0.0ms)  SELECT  1 AS one FROM `events` INNER JOIN `bookings_items` ON `events`.`id` = `bookings_items`.`booking_id` WHERE `events`.`type` IN ('Booking') AND `bookings_items`.`bookable_item_id` = 4 AND (starts_at < '2018-04-19 11:22:04' AND ends_at > '2018-04-19 10:22:04') LIMIT 1
D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` INNER JOIN `bookable_items_groups` ON `groups`.`id` = `bookable_items_groups`.`group_id` WHERE `bookable_items_groups`.`bookable_item_id` = 3
D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` INNER JOIN `bookable_items_groups` ON `groups`.`id` = `bookable_items_groups`.`group_id` WHERE `bookable_items_groups`.`bookable_item_id` = 4
D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` INNER JOIN `groups_users` ON `groups`.`id` = `groups_users`.`group_id` WHERE `groups_users`.`user_id` = 3
D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `events` (`type`, `title`, `starts_at`, `ends_at`, `created_by_id`, `created_at`) VALUES ('Booking', 'Lynching', '2018-04-19 10:22:04', '2018-04-19 11:22:04', 3, '2018-04-19 08:22:05')
D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookings_items` (`bookable_item_id`, `booking_id`) VALUES (3, 5)
D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :   SQL (0.0ms)  INSERT INTO `bookings_items` (`bookable_item_id`, `booking_id`) VALUES (4, 5)
D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :   User Load (0.0ms)  SELECT `users`.* FROM `users` INNER JOIN `events_users` ON `users`.`id` = `events_users`.`user_id` WHERE `events_users`.`event_id` = 5
D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :   User Load (0.0ms)  SELECT `users`.* FROM `users` INNER JOIN `equipment_responsibles` ON `users`.`id` = `equipment_responsibles`.`user_id` WHERE `equipment_responsibles`.`equipment_id` = 3
D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :   User Load (0.0ms)  SELECT `users`.* FROM `users` INNER JOIN `equipment_responsibles` ON `users`.`id` = `equipment_responsibles`.`user_id` WHERE `equipment_responsibles`.`equipment_id` = 4
I, [2018-04-19T10:22:05.098293 #8796]  INFO -- : Sending mail 'New booking 5' to ["Lucky Luke <luke@theforce.com>", "Jolly Jumper <jolly@jumper.com>"]
Title: Lynching
Created by : Lucky Luke
Starts at: 2018-04-19 10:22:04 UTC
Ends at  : 2018-04-19 11:22:04 UTC
Items: Tar, Feather

D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:05.098293 #8796] DEBUG -- :   User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`firstname` = 'Averell' LIMIT 1
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :   Equipment Load (15.6ms)  SELECT `bookable_items`.* FROM `bookable_items` WHERE `bookable_items`.`type` IN ('Equipment')
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :   Booking Exists (0.0ms)  SELECT  1 AS one FROM `events` INNER JOIN `bookings_items` ON `events`.`id` = `bookings_items`.`booking_id` WHERE `events`.`type` IN ('Booking') AND `bookings_items`.`bookable_item_id` = 3 AND (starts_at < '2018-04-19 11:22:04' AND ends_at > '2018-04-19 10:22:04') LIMIT 1
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :   Booking Exists (0.0ms)  SELECT  1 AS one FROM `events` INNER JOIN `bookings_items` ON `events`.`id` = `bookings_items`.`booking_id` WHERE `events`.`type` IN ('Booking') AND `bookings_items`.`bookable_item_id` = 4 AND (starts_at < '2018-04-19 11:22:04' AND ends_at > '2018-04-19 10:22:04') LIMIT 1
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` INNER JOIN `bookable_items_groups` ON `groups`.`id` = `bookable_items_groups`.`group_id` WHERE `bookable_items_groups`.`bookable_item_id` = 3
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` INNER JOIN `bookable_items_groups` ON `groups`.`id` = `bookable_items_groups`.`group_id` WHERE `bookable_items_groups`.`bookable_item_id` = 4
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` INNER JOIN `groups_users` ON `groups`.`id` = `groups_users`.`group_id` WHERE `groups_users`.`user_id` = 2
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :    (0.0ms)  ROLLBACK
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :   Group Load (0.0ms)  SELECT `groups`.* FROM `groups` LEFT OUTER JOIN `groups_users` ON `groups_users`.`group_id` = `groups`.`id` LEFT OUTER JOIN `users` ON `users`.`id` = `groups_users`.`user_id` WHERE `users`.`id` IS NULL
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :   SQL (0.0ms)  DELETE FROM `groups_users` WHERE `groups_users`.`group_id` = 4
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :   SQL (0.0ms)  DELETE FROM `groups` WHERE `groups`.`id` = 4
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :    (0.0ms)  BEGIN
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :   SQL (0.0ms)  DELETE FROM `groups_users` WHERE `groups_users`.`group_id` = 5
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :   SQL (0.0ms)  DELETE FROM `groups` WHERE `groups`.`id` = 5
D, [2018-04-19T10:22:05.113893 #8796] DEBUG -- :    (0.0ms)  COMMIT
D, [2018-04-19T10:22:05.129493 #8796] DEBUG -- :   BookableItem Load (0.0ms)  SELECT `bookable_items`.* FROM `bookable_items` LEFT OUTER JOIN `bookings_items` ON `bookings_items`.`bookable_item_id` = `bookable_items`.`id` LEFT OUTER JOIN `events` ON `events`.`id` = `bookings_items`.`booking_id` AND `events`.`type` IN ('Booking') WHERE `events`.`id` IS NULL
D, [2018-04-19T10:22:05.129493 #8796] DEBUG -- :   BookableItem Load (0.0ms)  SELECT `bookable_items`.* FROM `bookable_items` INNER JOIN `bookings_items` ON `bookings_items`.`bookable_item_id` = `bookable_items`.`id` INNER JOIN `events` ON `events`.`id` = `bookings_items`.`booking_id` AND `events`.`type` IN ('Booking') WHERE (YEAR(starts_at) >= '2018-04-19 08:22:04.957893') AND (YEAR(ends_at) <= '2018-04-19 08:22:04.957893')
D, [2018-04-19T10:22:05.129493 #8796] DEBUG -- :   BookableItem Exists (0.0ms)  SELECT  1 AS one FROM `bookable_items` INNER JOIN `bookings_items` ON `bookings_items`.`bookable_item_id` = `bookable_items`.`id` INNER JOIN `events` ON `events`.`id` = `bookings_items`.`booking_id` AND `events`.`type` IN ('Booking') WHERE (YEAR(starts_at) >= '2018-04-19 08:22:04.957893') AND (YEAR(ends_at) <= '2018-04-19 08:22:04.957893') LIMIT 1
D, [2018-04-19T10:22:05.129493 #8796] DEBUG -- :   BookableItem Exists (0.0ms)  SELECT  1 AS one FROM `bookable_items` INNER JOIN `bookings_items` ON `bookings_items`.`bookable_item_id` = `bookable_items`.`id` INNER JOIN `events` ON `events`.`id` = `bookings_items`.`booking_id` AND `events`.`type` IN ('Booking') WHERE (YEAR(starts_at) >= '2018-01-01') AND (YEAR(ends_at) <= '2018-01-01') LIMIT 1
D, [2018-04-19T10:22:05.129493 #8796] DEBUG -- :   Event Load (0.0ms)  SELECT  `events`.* FROM `events` ORDER BY (ends_at - starts_at) desc LIMIT 1
